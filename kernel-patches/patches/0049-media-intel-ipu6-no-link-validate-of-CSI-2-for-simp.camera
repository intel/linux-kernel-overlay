From 6291496dd1b81753bc9faeeb99fdd9e9ca2d27e0 Mon Sep 17 00:00:00 2001
From: zouxiaoh <xiaohong.zou@intel.com>
Date: Wed, 22 Mar 2023 15:45:31 +0800
Subject: [PATCH 49/60] media: intel-ipu6: no link validate of CSI-2 for
 simplified vc

Change Description:
multi streams with different formats and resolutions,
and no route info in simlified vc case, so remove
link validate of CSI-2 for simplified vc.

Signed-off-by: Chen Meng J <meng.j.chen@intel.com>
Signed-off-by: zouxiaoh <xiaohong.zou@intel.com>
---
 drivers/media/pci/intel/ipu-isys-subdev.c | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/drivers/media/pci/intel/ipu-isys-subdev.c b/drivers/media/pci/intel/ipu-isys-subdev.c
index 68c4a8492a16..2c69c344e17b 100644
--- a/drivers/media/pci/intel/ipu-isys-subdev.c
+++ b/drivers/media/pci/intel/ipu-isys-subdev.c
@@ -529,6 +529,11 @@ int ipu_isys_subdev_link_validate(struct v4l2_subdev *sd,
 		ip->source = to_ipu_isys_subdev(sd)->source;
 		dev_dbg(&asd->isys->adev->dev, "%s: using source %d\n",
 			sd->entity.name, ip->source);
+		/*
+		 * multi streams with different format/resolusion from external,
+		 * without route info, ignore link validate here.
+		 */
+		return 0;
 	} else if (source_sd->entity.num_pads == 1) {
 		/* All internal sources have a single pad. */
 		ip->external = link->source;
-- 
2.25.1

