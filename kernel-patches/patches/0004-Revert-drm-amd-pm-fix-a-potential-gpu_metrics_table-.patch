From 647cbaa84964573a7d4fe761365727773459f96a Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Thu, 6 Jan 2022 23:57:52 +0800
Subject: [PATCH 4/5] Revert "drm/amd/pm: fix a potential gpu_metrics_table
 memory leak"

This reverts commit 222cebd995cdf11fe0d502749560f65e64990e55.
---
 drivers/gpu/drm/amd/pm/swsmu/smu12/smu_v12_0.c | 3 ---
 1 file changed, 3 deletions(-)

diff --git a/drivers/gpu/drm/amd/pm/swsmu/smu12/smu_v12_0.c b/drivers/gpu/drm/amd/pm/swsmu/smu12/smu_v12_0.c
index b938fd12da4d..7907c9e0b5de 100644
--- a/drivers/gpu/drm/amd/pm/swsmu/smu12/smu_v12_0.c
+++ b/drivers/gpu/drm/amd/pm/swsmu/smu12/smu_v12_0.c
@@ -187,9 +187,6 @@ int smu_v12_0_fini_smc_tables(struct smu_context *smu)
 	kfree(smu_table->watermarks_table);
 	smu_table->watermarks_table = NULL;
 
-	kfree(smu_table->gpu_metrics_table);
-	smu_table->gpu_metrics_table = NULL;
-
 	return 0;
 }
 
-- 
2.27.0

