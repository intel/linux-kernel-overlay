From b9354d6b789946501fd3f304fa3b8243c60b4d7b Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Tue, 19 Jul 2022 14:50:01 +0800
Subject: [PATCH 49/62] Revert "drm/vc4: txp: Force alpha to be 0xff if it's
 disabled"

This reverts commit 84b0e23e107e8a8dad03f04701613704b5802846.
---
 drivers/gpu/drm/vc4/vc4_txp.c | 6 ------
 1 file changed, 6 deletions(-)

diff --git a/drivers/gpu/drm/vc4/vc4_txp.c b/drivers/gpu/drm/vc4/vc4_txp.c
index f8fa09dfea5d..d4e750cf3c02 100644
--- a/drivers/gpu/drm/vc4/vc4_txp.c
+++ b/drivers/gpu/drm/vc4/vc4_txp.c
@@ -301,12 +301,6 @@ static void vc4_txp_connector_atomic_commit(struct drm_connector *conn,
 
 	if (fb->format->has_alpha)
 		ctrl |= TXP_ALPHA_ENABLE;
-	else
-		/*
-		 * If TXP_ALPHA_ENABLE isn't set and TXP_ALPHA_INVERT is, the
-		 * hardware will force the output padding to be 0xff.
-		 */
-		ctrl |= TXP_ALPHA_INVERT;
 
 	gem = drm_fb_cma_get_gem_obj(fb, 0);
 	TXP_WRITE(TXP_DST_PTR, gem->paddr + fb->offsets[0]);
-- 
2.27.0

