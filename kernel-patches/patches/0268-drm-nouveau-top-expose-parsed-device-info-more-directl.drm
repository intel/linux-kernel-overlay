From 3ab6c3d60521aed98b111395eb0e827435646ea0 Mon Sep 17 00:00:00 2001
From: Ben Skeggs <bskeggs@redhat.com>
Date: Mon, 7 Dec 2020 08:54:34 +1000
Subject: [PATCH 268/330] drm/nouveau/top: expose parsed device info more
 directly

This is easier to deal with in some situations than the existing accessor
functions.

Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
Reviewed-by: Lyude Paul <lyude@redhat.com>
---
 drivers/gpu/drm/nouveau/include/nvkm/subdev/top.h | 13 +++++++++++++
 drivers/gpu/drm/nouveau/nvkm/subdev/top/priv.h    | 13 -------------
 2 files changed, 13 insertions(+), 13 deletions(-)

diff --git a/drivers/gpu/drm/nouveau/include/nvkm/subdev/top.h b/drivers/gpu/drm/nouveau/include/nvkm/subdev/top.h
index 7be0e7e7bd77..cf3c4fd8942d 100644
--- a/drivers/gpu/drm/nouveau/include/nvkm/subdev/top.h
+++ b/drivers/gpu/drm/nouveau/include/nvkm/subdev/top.h
@@ -9,6 +9,19 @@ struct nvkm_top {
 	struct list_head device;
 };
 
+struct nvkm_top_device {
+	enum nvkm_subdev_type type;
+	int inst;
+	enum nvkm_devidx index;
+	u32 addr;
+	int fault;
+	int engine;
+	int runlist;
+	int reset;
+	int intr;
+	struct list_head head;
+};
+
 u32 nvkm_top_addr(struct nvkm_device *, enum nvkm_devidx);
 u32 nvkm_top_reset(struct nvkm_device *, enum nvkm_devidx);
 u32 nvkm_top_intr(struct nvkm_device *, u32 intr, u64 *subdevs);
diff --git a/drivers/gpu/drm/nouveau/nvkm/subdev/top/priv.h b/drivers/gpu/drm/nouveau/nvkm/subdev/top/priv.h
index 85c9f1411012..37187691bfb4 100644
--- a/drivers/gpu/drm/nouveau/nvkm/subdev/top/priv.h
+++ b/drivers/gpu/drm/nouveau/nvkm/subdev/top/priv.h
@@ -11,18 +11,5 @@ struct nvkm_top_func {
 int nvkm_top_new_(const struct nvkm_top_func *, struct nvkm_device *,
 		  int, struct nvkm_top **);
 
-struct nvkm_top_device {
-	enum nvkm_subdev_type type;
-	int inst;
-	enum nvkm_devidx index;
-	u32 addr;
-	int fault;
-	int engine;
-	int runlist;
-	int reset;
-	int intr;
-	struct list_head head;
-};
-
 struct nvkm_top_device *nvkm_top_device_new(struct nvkm_top *);
 #endif
-- 
2.25.1

