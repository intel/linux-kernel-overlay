From ff944207b788d1ec30c95a123afd046e0b45a071 Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Wed, 10 Mar 2021 12:16:39 +0800
Subject: [PATCH 46/55] Revert "drm: rcar-du: Fix the return check of
 of_parse_phandle and of_find_device_by_node"

This reverts commit 61de9181c86c0a1d5908e95f05d6d8c8daec8d5b.
---
 drivers/gpu/drm/rcar-du/rcar_du_kms.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/drivers/gpu/drm/rcar-du/rcar_du_kms.c b/drivers/gpu/drm/rcar-du/rcar_du_kms.c
index 7015e22872bb..72dda446355f 100644
--- a/drivers/gpu/drm/rcar-du/rcar_du_kms.c
+++ b/drivers/gpu/drm/rcar-du/rcar_du_kms.c
@@ -700,10 +700,10 @@ static int rcar_du_cmm_init(struct rcar_du_device *rcdu)
 		int ret;
 
 		cmm = of_parse_phandle(np, "renesas,cmms", i);
-		if (!cmm) {
+		if (IS_ERR(cmm)) {
 			dev_err(rcdu->dev,
 				"Failed to parse 'renesas,cmms' property\n");
-			return -EINVAL;
+			return PTR_ERR(cmm);
 		}
 
 		if (!of_device_is_available(cmm)) {
@@ -713,10 +713,10 @@ static int rcar_du_cmm_init(struct rcar_du_device *rcdu)
 		}
 
 		pdev = of_find_device_by_node(cmm);
-		if (!pdev) {
+		if (IS_ERR(pdev)) {
 			dev_err(rcdu->dev, "No device found for CMM%u\n", i);
 			of_node_put(cmm);
-			return -EINVAL;
+			return PTR_ERR(pdev);
 		}
 
 		of_node_put(cmm);
-- 
2.25.1

