From 457192f7a9a5eb79fd7c924fb701c9e4a4db6a80 Mon Sep 17 00:00:00 2001
From: Uma Shankar <uma.shankar@intel.com>
Date: Tue, 18 Apr 2023 18:38:22 +0530
Subject: [PATCH 2002/2071] drm/i915/xelpd: Attach gamma mode property

Attach the gamma mode property to allow userspace set the gamma mode
and provide the luts for the same.

v2: Rebase on XE_LPD

v3: Updated the enum count.

v4: Create the prop before adding the gamma_mode range

Signed-off-by: Uma Shankar <uma.shankar@intel.com>
Signed-off-by: Bhanuprakash Modem <bhanuprakash.modem@intel.com>
---
 drivers/gpu/drm/i915/display/intel_color.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/drivers/gpu/drm/i915/display/intel_color.c b/drivers/gpu/drm/i915/display/intel_color.c
index 26034cd9823d..728be6a6210c 100644
--- a/drivers/gpu/drm/i915/display/intel_color.c
+++ b/drivers/gpu/drm/i915/display/intel_color.c
@@ -4023,6 +4023,7 @@ void intel_color_crtc_init(struct intel_crtc *crtc)
 					       "logarithmic gamma",
 					       xelpd_logarithmic_gamma,
 					       sizeof(xelpd_logarithmic_gamma));
+		drm_crtc_attach_gamma_mode_property(&crtc->base);
 	}
 }
 
-- 
2.25.1

