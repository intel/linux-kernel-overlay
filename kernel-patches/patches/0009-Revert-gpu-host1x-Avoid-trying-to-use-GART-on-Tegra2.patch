From f8ffea8f789e657378f326fc19792fa0f4852938 Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Wed, 28 Dec 2022 01:01:36 +0800
Subject: [PATCH 09/28] Revert "gpu: host1x: Avoid trying to use GART on
 Tegra20"

This reverts commit 79d9a11679785d7c5b10ce5ee85f43165d3f891f.
---
 drivers/gpu/drm/tegra/drm.c | 4 ----
 drivers/gpu/host1x/dev.c    | 4 ----
 2 files changed, 8 deletions(-)

diff --git a/drivers/gpu/drm/tegra/drm.c b/drivers/gpu/drm/tegra/drm.c
index 318692ad9680f..2c6ebc328b24f 100644
--- a/drivers/gpu/drm/tegra/drm.c
+++ b/drivers/gpu/drm/tegra/drm.c
@@ -1042,10 +1042,6 @@ static bool host1x_drm_wants_iommu(struct host1x_device *dev)
 	struct host1x *host1x = dev_get_drvdata(dev->dev.parent);
 	struct iommu_domain *domain;
 
-	/* Our IOMMU usage policy doesn't currently play well with GART */
-	if (of_machine_is_compatible("nvidia,tegra20"))
-		return false;
-
 	/*
 	 * If the Tegra DRM clients are backed by an IOMMU, push buffers are
 	 * likely to be allocated beyond the 32-bit boundary if sufficient
diff --git a/drivers/gpu/host1x/dev.c b/drivers/gpu/host1x/dev.c
index 9f674a8d5009d..8659558b518d6 100644
--- a/drivers/gpu/host1x/dev.c
+++ b/drivers/gpu/host1x/dev.c
@@ -198,10 +198,6 @@ static void host1x_setup_sid_table(struct host1x *host)
 
 static bool host1x_wants_iommu(struct host1x *host1x)
 {
-	/* Our IOMMU usage policy doesn't currently play well with GART */
-	if (of_machine_is_compatible("nvidia,tegra20"))
-		return false;
-
 	/*
 	 * If we support addressing a maximum of 32 bits of physical memory
 	 * and if the host1x firewall is enabled, there's no need to enable
-- 
2.25.1

