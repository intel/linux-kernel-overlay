From 995ad0ca76b9a7e565ceb370a785b97c0e8c55d5 Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Mon, 6 Feb 2023 10:14:19 +0800
Subject: [PATCH 10/45] Revert "drm/i915/gvt: fix vgpu debugfs clean in remove"

This reverts commit af90f8b36d78544433a48a3eda6a5faeafacd0a1.
---
 drivers/gpu/drm/i915/gvt/debugfs.c | 9 ++-------
 1 file changed, 2 insertions(+), 7 deletions(-)

diff --git a/drivers/gpu/drm/i915/gvt/debugfs.c b/drivers/gpu/drm/i915/gvt/debugfs.c
index e08ed0e9f1653..d7df27feee8c2 100644
--- a/drivers/gpu/drm/i915/gvt/debugfs.c
+++ b/drivers/gpu/drm/i915/gvt/debugfs.c
@@ -175,13 +175,8 @@ void intel_gvt_debugfs_add_vgpu(struct intel_vgpu *vgpu)
  */
 void intel_gvt_debugfs_remove_vgpu(struct intel_vgpu *vgpu)
 {
-	struct intel_gvt *gvt = vgpu->gvt;
-	struct drm_minor *minor = gvt->gt->i915->drm.primary;
-
-	if (minor->debugfs_root && gvt->debugfs_root) {
-		debugfs_remove_recursive(vgpu->debugfs);
-		vgpu->debugfs = NULL;
-	}
+	debugfs_remove_recursive(vgpu->debugfs);
+	vgpu->debugfs = NULL;
 }
 
 /**
-- 
2.25.1

