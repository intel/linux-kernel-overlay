From 4a5d1be635a0d16cf34bfe79e498f2d892cc1a94 Mon Sep 17 00:00:00 2001
From: Junxiao Chang <junxiao.chang@intel.com>
Date: Thu, 6 Jul 2023 15:01:17 +0800
Subject: [PATCH 0027/2351] Revert "drm/i915/iov: Expose early runtime
 registers for MTL"

This reverts commit 60b6d2928496f9874c0cd0767cd8b61ad884ec75.
---
 drivers/gpu/drm/i915/gem/i915_gem_stolen.c      | 4 ----
 drivers/gpu/drm/i915/gt/iov/intel_iov_service.c | 2 --
 2 files changed, 6 deletions(-)

diff --git a/drivers/gpu/drm/i915/gem/i915_gem_stolen.c b/drivers/gpu/drm/i915/gem/i915_gem_stolen.c
index 5d3860f6ce3e6..d8e06e783e30f 100644
--- a/drivers/gpu/drm/i915/gem/i915_gem_stolen.c
+++ b/drivers/gpu/drm/i915/gem/i915_gem_stolen.c
@@ -535,10 +535,6 @@ static int i915_gem_init_stolen(struct intel_memory_region *mem)
 	/* Basic memrange allocator for stolen space. */
 	drm_mm_init(&i915->mm.stolen, 0, i915->dsm.usable_size);
 
-	if (IS_MTL_GRAPHICS_STEP(i915, M, STEP_A0, STEP_B0) ||
-	    IS_MTL_GRAPHICS_STEP(i915, P, STEP_A0, STEP_B0))
-		i915->dsm.usable_size = 0;
-
 	return 0;
 }
 
diff --git a/drivers/gpu/drm/i915/gt/iov/intel_iov_service.c b/drivers/gpu/drm/i915/gt/iov/intel_iov_service.c
index e5247e058a291..7c1cc8596d21a 100644
--- a/drivers/gpu/drm/i915/gt/iov/intel_iov_service.c
+++ b/drivers/gpu/drm/i915/gt/iov/intel_iov_service.c
@@ -53,9 +53,7 @@ static const i915_reg_t mtl_runtime_regs[] = {
 	CTC_MODE,			/* _MMIO(0xA26C) */
 	GEN11_HUC_KERNEL_LOAD_INFO,	/* _MMIO(0xC1DC) */
 	GEN9_TIMESTAMP_OVERRIDE,	/* _MMIO(0x44074) */
-	_MMIO(0x10100C),
 	MTL_GT_ACTIVITY_FACTOR,		/* _MMIO(0x138010) */
-	_MMIO(0x389140),
 };
 
 static const i915_reg_t *get_runtime_regs(struct drm_i915_private *i915,
-- 
2.25.1

