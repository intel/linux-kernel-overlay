From b0a1eba07a2014bda0e29fab4d33ba980e1df4a5 Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Thu, 18 Nov 2021 17:06:11 +0800
Subject: [PATCH 26/64] Revert "drm/etnaviv: fix MMU context leak on GPU reset"

This reverts commit 660dfbf208a4bf3eaab8560e8671be831b52e1c1.
---
 drivers/gpu/drm/etnaviv/etnaviv_gpu.c | 2 --
 1 file changed, 2 deletions(-)

diff --git a/drivers/gpu/drm/etnaviv/etnaviv_gpu.c b/drivers/gpu/drm/etnaviv/etnaviv_gpu.c
index 79c9dd2274da..d31eaec617d9 100644
--- a/drivers/gpu/drm/etnaviv/etnaviv_gpu.c
+++ b/drivers/gpu/drm/etnaviv/etnaviv_gpu.c
@@ -563,8 +563,6 @@ static int etnaviv_hw_reset(struct etnaviv_gpu *gpu)
 
 	gpu->fe_running = false;
 	gpu->exec_state = -1;
-	if (gpu->mmu_context)
-		etnaviv_iommu_context_put(gpu->mmu_context);
 	gpu->mmu_context = NULL;
 
 	return 0;
-- 
2.27.0

