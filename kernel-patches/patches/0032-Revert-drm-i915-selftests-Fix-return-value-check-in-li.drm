From 567087bb28f10d88a338ea8e857f74bb0239200a Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Tue, 6 Jul 2021 18:16:16 +0800
Subject: [PATCH 32/45] Revert "drm/i915/selftests: Fix return value check in
 live_breadcrumbs_smoketest()"

This reverts commit 4cf297ef595ce98cb4e9d80ae3e00bb5af0a8de0.
---
 drivers/gpu/drm/i915/selftests/i915_request.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/gpu/drm/i915/selftests/i915_request.c b/drivers/gpu/drm/i915/selftests/i915_request.c
index 7a72faf29f272..e424a6d1a68c9 100644
--- a/drivers/gpu/drm/i915/selftests/i915_request.c
+++ b/drivers/gpu/drm/i915/selftests/i915_request.c
@@ -1391,8 +1391,8 @@ static int live_breadcrumbs_smoketest(void *arg)
 
 	for (n = 0; n < smoke[0].ncontexts; n++) {
 		smoke[0].contexts[n] = live_context(i915, file);
-		if (IS_ERR(smoke[0].contexts[n])) {
-			ret = PTR_ERR(smoke[0].contexts[n]);
+		if (!smoke[0].contexts[n]) {
+			ret = -ENOMEM;
 			goto out_contexts;
 		}
 	}
-- 
2.25.1

