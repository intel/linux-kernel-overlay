From 29989a5e17cfd444b65a14f77fe88062922498d8 Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Sat, 20 Feb 2021 17:53:42 +0800
Subject: [PATCH 17/26] Revert "drm/i915: Fix ICL MG PHY vswing handling"

This reverts commit 43f39b85e9bdc8c8cd42e0916a06b0bb4aaf5165.
---
 drivers/gpu/drm/i915/display/intel_ddi.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

diff --git a/drivers/gpu/drm/i915/display/intel_ddi.c b/drivers/gpu/drm/i915/display/intel_ddi.c
index 65e5d3e033aa..40dfb4d0ffbe 100644
--- a/drivers/gpu/drm/i915/display/intel_ddi.c
+++ b/drivers/gpu/drm/i915/display/intel_ddi.c
@@ -2605,11 +2605,12 @@ static void icl_mg_phy_ddi_vswing_sequence(struct intel_encoder *encoder,
 
 	ddi_translations = icl_get_mg_buf_trans(encoder, type, rate,
 						&n_entries);
-	if (level >= n_entries) {
+	/* The table does not have values for level 3 and level 9. */
+	if (level >= n_entries || level == 3 || level == 9) {
 		drm_dbg_kms(&dev_priv->drm,
 			    "DDI translation not found for level %d. Using %d instead.",
-			    level, n_entries - 1);
-		level = n_entries - 1;
+			    level, n_entries - 2);
+		level = n_entries - 2;
 	}
 
 	/* Set MG_TX_LINK_PARAMS cri_use_fs32 to 0. */
-- 
2.25.1

