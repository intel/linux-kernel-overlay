From f2ae577afac91d7410ea3fc3a45edc342c01d350 Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Tue, 6 Sep 2022 07:43:16 +0800
Subject: [PATCH 16/60] Revert "drm/rockchip: vop: Don't crash for invalid
 duplicate_state()"

This reverts commit 9f416e32eda913bf31d6ae2915584e0d994bece1.
---
 drivers/gpu/drm/rockchip/rockchip_drm_vop.c | 3 ---
 1 file changed, 3 deletions(-)

diff --git a/drivers/gpu/drm/rockchip/rockchip_drm_vop.c b/drivers/gpu/drm/rockchip/rockchip_drm_vop.c
index af98bfcde5189..91568f166a8ad 100644
--- a/drivers/gpu/drm/rockchip/rockchip_drm_vop.c
+++ b/drivers/gpu/drm/rockchip/rockchip_drm_vop.c
@@ -1530,9 +1530,6 @@ static struct drm_crtc_state *vop_crtc_duplicate_state(struct drm_crtc *crtc)
 {
 	struct rockchip_crtc_state *rockchip_state;
 
-	if (WARN_ON(!crtc->state))
-		return NULL;
-
 	rockchip_state = kzalloc(sizeof(*rockchip_state), GFP_KERNEL);
 	if (!rockchip_state)
 		return NULL;
-- 
2.25.1

