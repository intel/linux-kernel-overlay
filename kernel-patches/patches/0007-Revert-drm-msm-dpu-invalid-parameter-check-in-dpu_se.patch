From 5dc47632e6846b200c52075d6db75244c3c1cd9d Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Wed, 16 Feb 2022 00:20:09 +0800
Subject: [PATCH 07/50] Revert "drm/msm/dpu: invalid parameter check in
 dpu_setup_dspp_pcc"

This reverts commit 93a6e920d8ccb4df846c03b6e72f7e08843d294c.
---
 drivers/gpu/drm/msm/disp/dpu1/dpu_hw_dspp.c | 11 ++---------
 1 file changed, 2 insertions(+), 9 deletions(-)

diff --git a/drivers/gpu/drm/msm/disp/dpu1/dpu_hw_dspp.c b/drivers/gpu/drm/msm/disp/dpu1/dpu_hw_dspp.c
index a6efc11eba93..a7a24539921f 100644
--- a/drivers/gpu/drm/msm/disp/dpu1/dpu_hw_dspp.c
+++ b/drivers/gpu/drm/msm/disp/dpu1/dpu_hw_dspp.c
@@ -26,16 +26,9 @@ static void dpu_setup_dspp_pcc(struct dpu_hw_dspp *ctx,
 		struct dpu_hw_pcc_cfg *cfg)
 {
 
-	u32 base;
+	u32 base = ctx->cap->sblk->pcc.base;
 
-	if (!ctx) {
-		DRM_ERROR("invalid ctx %pK\n", ctx);
-		return;
-	}
-
-	base = ctx->cap->sblk->pcc.base;
-
-	if (!base) {
+	if (!ctx || !base) {
 		DRM_ERROR("invalid ctx %pK pcc base 0x%x\n", ctx, base);
 		return;
 	}
-- 
2.27.0

