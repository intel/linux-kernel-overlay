From fceb1a4f38e02b4b8d4fa27d491f385b57da09f3 Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Tue, 6 Sep 2022 07:43:32 +0800
Subject: [PATCH 46/60] Revert "drm/amdgpu: Check BO's requested pinning
 domains against its preferred_domains"

This reverts commit 15d0aeb017856b501870741587d6a75f8b06166a.
---
 drivers/gpu/drm/amd/amdgpu/amdgpu_object.c | 4 ----
 1 file changed, 4 deletions(-)

diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_object.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_object.c
index 6937f81340084..f615ecc06a223 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_object.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_object.c
@@ -905,10 +905,6 @@ int amdgpu_bo_pin_restricted(struct amdgpu_bo *bo, u32 domain,
 	if (WARN_ON_ONCE(min_offset > max_offset))
 		return -EINVAL;
 
-	/* Check domain to be pinned to against preferred domains */
-	if (bo->preferred_domains & domain)
-		domain = bo->preferred_domains & domain;
-
 	/* A shared bo cannot be migrated to VRAM */
 	if (bo->prime_shared_count) {
 		if (domain & AMDGPU_GEM_DOMAIN_GTT)
-- 
2.25.1

