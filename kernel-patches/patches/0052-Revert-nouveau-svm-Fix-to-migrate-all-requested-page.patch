From e4bd2e9dd245d31b86ed5011f66fabe64a12db3a Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Tue, 6 Sep 2022 07:43:33 +0800
Subject: [PATCH 52/60] Revert "nouveau/svm: Fix to migrate all requested
 pages"

This reverts commit b38a8802c52d5ed9a0256b6ff95229e9f454e93e.
---
 drivers/gpu/drm/nouveau/nouveau_dmem.c | 6 +-----
 1 file changed, 1 insertion(+), 5 deletions(-)

diff --git a/drivers/gpu/drm/nouveau/nouveau_dmem.c b/drivers/gpu/drm/nouveau/nouveau_dmem.c
index 5e72e6cb2f840..92987daa5e17d 100644
--- a/drivers/gpu/drm/nouveau/nouveau_dmem.c
+++ b/drivers/gpu/drm/nouveau/nouveau_dmem.c
@@ -679,11 +679,7 @@ nouveau_dmem_migrate_vma(struct nouveau_drm *drm,
 		goto out_free_dma;
 
 	for (i = 0; i < npages; i += max) {
-		if (args.start + (max << PAGE_SHIFT) > end)
-			args.end = end;
-		else
-			args.end = args.start + (max << PAGE_SHIFT);
-
+		args.end = start + (max << PAGE_SHIFT);
 		ret = migrate_vma_setup(&args);
 		if (ret)
 			goto out_free_pfns;
-- 
2.25.1

