From d6adfcc338f539f19e0677e288c6c6c353e884d4 Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Mon, 7 Jun 2021 19:08:47 +0800
Subject: [PATCH 63/78] Revert "drm/amd/display: Fix UBSAN warning for not a
 valid value for type '_Bool'"

This reverts commit 9cc76f29b9e54a7e727c1c0d2d5210735d34b079.
---
 drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c b/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c
index 12a4f0675fb0..830d302be045 100644
--- a/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c
+++ b/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c
@@ -6800,6 +6800,10 @@ static int get_cursor_position(struct drm_plane *plane, struct drm_crtc *crtc,
 	int x, y;
 	int xorigin = 0, yorigin = 0;
 
+	position->enable = false;
+	position->x = 0;
+	position->y = 0;
+
 	if (!crtc || !plane->state->fb)
 		return 0;
 
@@ -6846,7 +6850,7 @@ static void handle_cursor_update(struct drm_plane *plane,
 	struct dm_crtc_state *crtc_state = crtc ? to_dm_crtc_state(crtc->state) : NULL;
 	struct amdgpu_crtc *amdgpu_crtc = to_amdgpu_crtc(crtc);
 	uint64_t address = afb ? afb->address : 0;
-	struct dc_cursor_position position = {0};
+	struct dc_cursor_position position;
 	struct dc_cursor_attributes attributes;
 	int ret;
 
-- 
2.25.1

