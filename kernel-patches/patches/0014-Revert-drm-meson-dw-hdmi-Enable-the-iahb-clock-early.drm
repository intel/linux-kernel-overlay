From 4d78e9b31f474eaaa0075510ad1bf353abc894e8 Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Thu, 7 Jan 2021 11:20:58 +0800
Subject: [PATCH 14/42] Revert "drm/meson: dw-hdmi: Enable the iahb clock early
 enough"

This reverts commit 6cf9c3f4dfa07837acb520256091b21d315cfda8.
---
 drivers/gpu/drm/meson/meson_dw_hdmi.c | 8 ++------
 1 file changed, 2 insertions(+), 6 deletions(-)

diff --git a/drivers/gpu/drm/meson/meson_dw_hdmi.c b/drivers/gpu/drm/meson/meson_dw_hdmi.c
index aad75a22dc33..29623b309cb1 100644
--- a/drivers/gpu/drm/meson/meson_dw_hdmi.c
+++ b/drivers/gpu/drm/meson/meson_dw_hdmi.c
@@ -1051,10 +1051,6 @@ static int meson_dw_hdmi_bind(struct device *dev, struct device *master,
 	if (ret)
 		return ret;
 
-	ret = meson_enable_clk(dev, "iahb");
-	if (ret)
-		return ret;
-
 	ret = meson_enable_clk(dev, "venci");
 	if (ret)
 		return ret;
@@ -1090,8 +1086,6 @@ static int meson_dw_hdmi_bind(struct device *dev, struct device *master,
 
 	encoder->possible_crtcs = BIT(0);
 
-	meson_dw_hdmi_init(meson_dw_hdmi);
-
 	DRM_DEBUG_DRIVER("encoder initialized\n");
 
 	/* Bridge / Connector */
@@ -1116,6 +1110,8 @@ static int meson_dw_hdmi_bind(struct device *dev, struct device *master,
 	if (IS_ERR(meson_dw_hdmi->hdmi))
 		return PTR_ERR(meson_dw_hdmi->hdmi);
 
+	meson_dw_hdmi_init(meson_dw_hdmi);
+
 	next_bridge = of_drm_find_bridge(pdev->dev.of_node);
 	if (next_bridge)
 		drm_bridge_attach(encoder, next_bridge,
-- 
2.25.1

