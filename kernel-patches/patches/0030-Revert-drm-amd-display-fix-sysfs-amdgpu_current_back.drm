From 2f851ed908f16c10f058ec6cfeb62cf5837b70a4 Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Fri, 29 Jan 2021 21:29:16 +0800
Subject: [PATCH 30/39] Revert "drm/amd/display: fix sysfs
 amdgpu_current_backlight_pwm NULL pointer issue"

This reverts commit 26f0adb0b4c80248b8c111fd4f34b324c9420970.
---
 drivers/gpu/drm/amd/display/dc/core/dc_link.c | 7 +------
 1 file changed, 1 insertion(+), 6 deletions(-)

diff --git a/drivers/gpu/drm/amd/display/dc/core/dc_link.c b/drivers/gpu/drm/amd/display/dc/core/dc_link.c
index e1e5d81a5e43..5b0cedfa824a 100644
--- a/drivers/gpu/drm/amd/display/dc/core/dc_link.c
+++ b/drivers/gpu/drm/amd/display/dc/core/dc_link.c
@@ -2471,14 +2471,9 @@ enum dc_status dc_link_validate_mode_timing(
 static struct abm *get_abm_from_stream_res(const struct dc_link *link)
 {
 	int i;
-	struct dc *dc = NULL;
+	struct dc *dc = link->ctx->dc;
 	struct abm *abm = NULL;
 
-	if (!link || !link->ctx)
-		return NULL;
-
-	dc = link->ctx->dc;
-
 	for (i = 0; i < MAX_PIPES; i++) {
 		struct pipe_ctx pipe_ctx = dc->current_state->res_ctx.pipe_ctx[i];
 		struct dc_stream_state *stream = pipe_ctx.stream;
-- 
2.25.1

