From 66163b030166abfbfe9688072966dcfb9dd52c11 Mon Sep 17 00:00:00 2001
From: Junxiao Chang <junxiao.chang@intel.com>
Date: Thu, 6 Jul 2023 15:04:20 +0800
Subject: [PATCH 0096/2351] Revert "drm/i915/mtl: TypeC HPD live status query"

This reverts commit da9a75691a1e704e2972309faf9b3114a0fadeb0.
---
 drivers/gpu/drm/i915/display/intel_tc.c | 30 -------------------------
 1 file changed, 30 deletions(-)

diff --git a/drivers/gpu/drm/i915/display/intel_tc.c b/drivers/gpu/drm/i915/display/intel_tc.c
index aa34d6954b3ac..9835d5e8675fc 100644
--- a/drivers/gpu/drm/i915/display/intel_tc.c
+++ b/drivers/gpu/drm/i915/display/intel_tc.c
@@ -297,40 +297,10 @@ static u32 adl_tc_port_live_status_mask(struct intel_digital_port *dig_port)
 	return mask;
 }
 
-static u32 xelpdp_tc_port_live_status_mask(struct intel_digital_port *dig_port)
-{
-	struct drm_i915_private *i915 = to_i915(dig_port->base.base.dev);
-	enum tc_port tc_port = intel_port_to_tc(i915, dig_port->base.port);
-	u32 isr_bit = i915->display.hotplug.pch_hpd[dig_port->base.hpd_pin];
-	struct intel_uncore *uncore = &i915->uncore;
-	u32 val, mask = 0;
-	enum hpd_pin pin;
-
-	val = intel_uncore_read(uncore, PICAINTERRUPT_ISR);
-	pin = HPD_PORT_TC1 + tc_port - TC_PORT_1;
-	if (val & XELPDP_DP_ALT_HOTPLUG(pin))
-		mask |= BIT(TC_PORT_DP_ALT);
-	if (val & XELPDP_TBT_HOTPLUG(pin))
-		mask |= BIT(TC_PORT_TBT_ALT);
-
-	if (dig_port->tc_legacy_port &&
-	    intel_uncore_read(uncore, SDEISR) & isr_bit)
-		mask |= BIT(TC_PORT_LEGACY);
-
-	/* The sink can be connected only in a single mode. */
-	if (!drm_WARN_ON(&i915->drm, hweight32(mask) > 1))
-		tc_port_fixup_legacy_flag(dig_port, mask);
-
-	return mask;
-}
-
 static u32 tc_port_live_status_mask(struct intel_digital_port *dig_port)
 {
 	struct drm_i915_private *i915 = to_i915(dig_port->base.base.dev);
 
-	if (DISPLAY_VER(i915) >= 14)
-		return xelpdp_tc_port_live_status_mask(dig_port);
-
 	if (DISPLAY_VER(i915) >= 13)
 		return adl_tc_port_live_status_mask(dig_port);
 
-- 
2.25.1

