From 84c21468805f06d1092e25963d91b142470e6f96 Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Tue, 6 Sep 2022 07:43:27 +0800
Subject: [PATCH 37/60] Revert "virtio-gpu: fix a missing check to avoid NULL
 dereference"

This reverts commit 259773fc874258606c0121767a4a27466ff337eb.
---
 drivers/gpu/drm/virtio/virtgpu_ioctl.c | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

diff --git a/drivers/gpu/drm/virtio/virtgpu_ioctl.c b/drivers/gpu/drm/virtio/virtgpu_ioctl.c
index 33b8ebab178a1..c8da7adc6b307 100644
--- a/drivers/gpu/drm/virtio/virtgpu_ioctl.c
+++ b/drivers/gpu/drm/virtio/virtgpu_ioctl.c
@@ -470,10 +470,8 @@ static int virtio_gpu_get_caps_ioctl(struct drm_device *dev,
 	spin_unlock(&vgdev->display_info_lock);
 
 	/* not in cache - need to talk to hw */
-	ret = virtio_gpu_cmd_get_capset(vgdev, found_valid, args->cap_set_ver,
-					&cache_ent);
-	if (ret)
-		return ret;
+	virtio_gpu_cmd_get_capset(vgdev, found_valid, args->cap_set_ver,
+				  &cache_ent);
 	virtio_gpu_notify(vgdev);
 
 copy_exit:
-- 
2.25.1

