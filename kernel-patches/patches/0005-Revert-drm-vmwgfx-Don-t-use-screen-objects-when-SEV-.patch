From 86d1343177035f996389f6c4d943f46066c89386 Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Wed, 18 Jan 2023 01:00:46 +0800
Subject: [PATCH 5/5] Revert "drm/vmwgfx: Don't use screen objects when SEV is
 active"

This reverts commit 007f561f599f4977e1e281a92db8c11ad78762d4.
---
 drivers/gpu/drm/vmwgfx/vmwgfx_scrn.c | 4 ----
 1 file changed, 4 deletions(-)

diff --git a/drivers/gpu/drm/vmwgfx/vmwgfx_scrn.c b/drivers/gpu/drm/vmwgfx/vmwgfx_scrn.c
index 2b6590344468d..4bf0f5ec4fc2d 100644
--- a/drivers/gpu/drm/vmwgfx/vmwgfx_scrn.c
+++ b/drivers/gpu/drm/vmwgfx/vmwgfx_scrn.c
@@ -949,10 +949,6 @@ int vmw_kms_sou_init_display(struct vmw_private *dev_priv)
 	struct drm_device *dev = dev_priv->dev;
 	int i, ret;
 
-	/* Screen objects won't work if GMR's aren't available */
-	if (!dev_priv->has_gmr)
-		return -ENOSYS;
-
 	if (!(dev_priv->capabilities & SVGA_CAP_SCREEN_OBJECT_2)) {
 		DRM_INFO("Not using screen objects,"
 			 " missing cap SCREEN_OBJECT_2\n");
-- 
2.25.1

