From a0f072b30a150e815d18a2c0554d6f106a47e785 Mon Sep 17 00:00:00 2001
From: Junxiao Chang <junxiao.chang@intel.com>
Date: Wed, 24 Nov 2021 13:16:34 +0800
Subject: [PATCH 008/888] Revert "drm/i915: Verify dma_addr in
 gen8_ggtt_pte_encode"

This reverts commit e8e402832eef5c7cfb438c8b586f4d51d0dc1347.
---
 drivers/gpu/drm/i915/gt/intel_ggtt.c | 2 --
 drivers/gpu/drm/i915/gt/intel_gtt.h  | 1 -
 2 files changed, 3 deletions(-)

diff --git a/drivers/gpu/drm/i915/gt/intel_ggtt.c b/drivers/gpu/drm/i915/gt/intel_ggtt.c
index 8c533f0c3400..bb026288e0d2 100644
--- a/drivers/gpu/drm/i915/gt/intel_ggtt.c
+++ b/drivers/gpu/drm/i915/gt/intel_ggtt.c
@@ -234,8 +234,6 @@ u64 gen8_ggtt_pte_encode(dma_addr_t addr,
 {
 	gen8_pte_t pte = addr | _PAGE_PRESENT;
 
-	GEM_BUG_ON(addr & ~GEN12_GGTT_PTE_ADDR_MASK);
-
 	if (flags & PTE_LM)
 		pte |= GEN12_GGTT_PTE_LM;
 
diff --git a/drivers/gpu/drm/i915/gt/intel_gtt.h b/drivers/gpu/drm/i915/gt/intel_gtt.h
index a11283f1a262..9b78cdb208ca 100644
--- a/drivers/gpu/drm/i915/gt/intel_gtt.h
+++ b/drivers/gpu/drm/i915/gt/intel_gtt.h
@@ -99,7 +99,6 @@ typedef u64 gen8_pte_t;
 
 #define GEN12_GGTT_PTE_LM	BIT_ULL(1)
 #define TGL_GGTT_PTE_VFID_MASK		GENMASK_ULL(4, 2)
-#define GEN12_GGTT_PTE_ADDR_MASK	GENMASK_ULL(45, 12)
 
 /*
  * Cacheability Control is a 4-bit value. The low three bits are stored in bits
-- 
2.25.1

