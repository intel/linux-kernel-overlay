From 4a6ab1518d1cd9066427d202fd4cff875c141ac6 Mon Sep 17 00:00:00 2001
From: Thomas Zimmermann <tzimmermann@suse.de>
Date: Sun, 2 May 2021 12:49:53 +0200
Subject: [PATCH 187/331] drm: Remove pdev field from struct drm_device

The field pdev in struct drm_device is unused. Remove it. The
value can be obtained by upcasting from the structure's dev field.

Signed-off-by: Thomas Zimmermann <tzimmermann@suse.de>
Reviewed-by: Maxime Ripard <maxime@cerno.tech>
Link: https://patchwork.freedesktop.org/patch/msgid/20210502104953.21768-8-tzimmermann@suse.de
---
 drivers/gpu/drm/drm_pci.c | 1 -
 include/drm/drm_device.h  | 3 ---
 2 files changed, 4 deletions(-)

diff --git a/drivers/gpu/drm/drm_pci.c b/drivers/gpu/drm/drm_pci.c
index 1a1a2d4046e9..03bd863ff0b2 100644
--- a/drivers/gpu/drm/drm_pci.c
+++ b/drivers/gpu/drm/drm_pci.c
@@ -162,7 +162,6 @@ static int drm_get_pci_dev(struct pci_dev *pdev,
 	if (ret)
 		goto err_free;
 
-	dev->pdev = pdev;
 #ifdef __alpha__
 	dev->hose = pdev->sysdata;
 #endif
diff --git a/include/drm/drm_device.h b/include/drm/drm_device.h
index c5a195676e8f..e5d6305e64a2 100644
--- a/include/drm/drm_device.h
+++ b/include/drm/drm_device.h
@@ -321,9 +321,6 @@ struct drm_device {
 	/* List of devices per driver for stealth attach cleanup */
 	struct list_head legacy_dev_list;
 
-	/* PCI device structure */
-	struct pci_dev *pdev;
-
 #ifdef __alpha__
 	/** @hose: PCI hose, only used on ALPHA platforms. */
 	struct pci_controller *hose;
-- 
2.27.0

