From 2f87594d7e6186888cadc87877fee080b4b8e6dd Mon Sep 17 00:00:00 2001
From: "Pan, Kris" <kris.pan@intel.com>
Date: Tue, 29 Sep 2020 10:08:39 +0800
Subject: [PATCH 036/170] [DONT MERGE] fix XBAY_RAS dependency build error

drivers/misc/xbay_ras/cortex_a53_edac.c: Assembler messages:
drivers/misc/xbay_ras/cortex_a53_edac.c:85: Error: no such instruction: `mrs %rbx,s3_1_c15_c2_3'
drivers/misc/xbay_ras/cortex_a53_edac.c:91: Error: no such instruction: `msr s3_1_c15_c2_3,%rax'
drivers/misc/xbay_ras/cortex_a53_edac.c:72: Error: no such instruction: `mrs %rbx,s3_1_c15_c2_2'
drivers/misc/xbay_ras/cortex_a53_edac.c:78: Error: no such instruction: `msr s3_1_c15_c2_2,%rax'
scripts/Makefile.build:280: recipe for target 'drivers/misc/xbay_ras/cortex_a53_edac.o' failed
make[3]: *** [drivers/misc/xbay_ras/cortex_a53_edac.o] Error 1

Signed-off-by: Pan, Kris <kris.pan@intel.com>
---
 drivers/misc/Kconfig | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/drivers/misc/Kconfig b/drivers/misc/Kconfig
index a2b031ed9dbf..6d5a32008076 100644
--- a/drivers/misc/Kconfig
+++ b/drivers/misc/Kconfig
@@ -448,8 +448,9 @@ config HISI_HIKEY_USB
 	  using only one USB controller.
 
 config XBAY_RAS
-	tristate "xBAY RAS Collector Driver"
+	bool "xBAY RAS Collector Driver"
 	depends on HAS_IOMEM
+	depends on ARM64
 	help
 	  This option enables support for XBay RAS Collector driver. This
 	  enables a sysfs interface to read the RAS EDAC information from
-- 
2.27.0

