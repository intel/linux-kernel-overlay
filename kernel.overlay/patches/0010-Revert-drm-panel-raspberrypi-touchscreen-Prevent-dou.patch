From 77d9d5f4254a38a43d12398081e6e6ff93173984 Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Tue, 10 Aug 2021 09:42:30 +0800
Subject: [PATCH 10/11] Revert "drm/panel: raspberrypi-touchscreen: Prevent
 double-free"

This reverts commit b91e5b63470d7a2f5225540e8093b06426d00bf9.
---
 drivers/gpu/drm/panel/panel-raspberrypi-touchscreen.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/drivers/gpu/drm/panel/panel-raspberrypi-touchscreen.c b/drivers/gpu/drm/panel/panel-raspberrypi-touchscreen.c
index bbdd086be7f5..5e9ccefb88f6 100644
--- a/drivers/gpu/drm/panel/panel-raspberrypi-touchscreen.c
+++ b/drivers/gpu/drm/panel/panel-raspberrypi-touchscreen.c
@@ -447,6 +447,7 @@ static int rpi_touchscreen_remove(struct i2c_client *i2c)
 	drm_panel_remove(&ts->base);
 
 	mipi_dsi_device_unregister(ts->dsi);
+	kfree(ts->dsi);
 
 	return 0;
 }
-- 
2.27.0

