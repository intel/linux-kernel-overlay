From fcbf2a4c169dca950eddc75fa9376b6aea0684fc Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Tue, 27 Jul 2021 00:06:30 +0800
Subject: [PATCH 09/77] Revert "drm/i915/gt: Fix -EDEADLK handling regression"

This reverts commit 0728df8048060e9bdedb9dd38c62782ee97184ba.
---
 drivers/gpu/drm/i915/gt/intel_ggtt_fencing.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/gpu/drm/i915/gt/intel_ggtt_fencing.c b/drivers/gpu/drm/i915/gt/intel_ggtt_fencing.c
index cd71631bef0c..b5937b39145a 100644
--- a/drivers/gpu/drm/i915/gt/intel_ggtt_fencing.c
+++ b/drivers/gpu/drm/i915/gt/intel_ggtt_fencing.c
@@ -348,7 +348,7 @@ static struct i915_fence_reg *fence_find(struct i915_ggtt *ggtt)
 	if (intel_has_pending_fb_unpin(ggtt->vm.i915))
 		return ERR_PTR(-EAGAIN);
 
-	return ERR_PTR(-ENOBUFS);
+	return ERR_PTR(-EDEADLK);
 }
 
 int __i915_vma_pin_fence(struct i915_vma *vma)
-- 
2.25.1

