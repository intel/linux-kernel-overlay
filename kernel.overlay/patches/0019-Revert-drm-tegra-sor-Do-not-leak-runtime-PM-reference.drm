From b303c72497dfe6c33d7bb93ff7b2f874abc3d765 Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Tue, 6 Jul 2021 18:16:12 +0800
Subject: [PATCH 19/45] Revert "drm/tegra: sor: Do not leak runtime PM
 reference"

This reverts commit 570b3e4020f2aa7ab6908042e7f3a41ab24ce261.
---
 drivers/gpu/drm/tegra/sor.c | 14 ++++----------
 1 file changed, 4 insertions(+), 10 deletions(-)

diff --git a/drivers/gpu/drm/tegra/sor.c b/drivers/gpu/drm/tegra/sor.c
index 67a80dae1c00c..7b88261f57bb6 100644
--- a/drivers/gpu/drm/tegra/sor.c
+++ b/drivers/gpu/drm/tegra/sor.c
@@ -3125,21 +3125,21 @@ static int tegra_sor_init(struct host1x_client *client)
 		if (err < 0) {
 			dev_err(sor->dev, "failed to acquire SOR reset: %d\n",
 				err);
-			goto rpm_put;
+			return err;
 		}
 
 		err = reset_control_assert(sor->rst);
 		if (err < 0) {
 			dev_err(sor->dev, "failed to assert SOR reset: %d\n",
 				err);
-			goto rpm_put;
+			return err;
 		}
 	}
 
 	err = clk_prepare_enable(sor->clk);
 	if (err < 0) {
 		dev_err(sor->dev, "failed to enable clock: %d\n", err);
-		goto rpm_put;
+		return err;
 	}
 
 	usleep_range(1000, 3000);
@@ -3150,7 +3150,7 @@ static int tegra_sor_init(struct host1x_client *client)
 			dev_err(sor->dev, "failed to deassert SOR reset: %d\n",
 				err);
 			clk_disable_unprepare(sor->clk);
-			goto rpm_put;
+			return err;
 		}
 
 		reset_control_release(sor->rst);
@@ -3171,12 +3171,6 @@ static int tegra_sor_init(struct host1x_client *client)
 	}
 
 	return 0;
-
-rpm_put:
-	if (sor->rst)
-		pm_runtime_put(sor->dev);
-
-	return err;
 }
 
 static int tegra_sor_exit(struct host1x_client *client)
-- 
2.25.1

