From dffe976099f8ded4278943ac549eb96160b9b7e9 Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Thu, 7 Jan 2021 11:21:02 +0800
Subject: [PATCH 28/42] Revert "drm/msm/a6xx: Clear shadow on suspend"

This reverts commit 3edab64c3e424a71afd09fabd57c329a0baaac28.
---
 drivers/gpu/drm/msm/adreno/a6xx_gpu.c | 11 +----------
 1 file changed, 1 insertion(+), 10 deletions(-)

diff --git a/drivers/gpu/drm/msm/adreno/a6xx_gpu.c b/drivers/gpu/drm/msm/adreno/a6xx_gpu.c
index 420ca4a0eb5f..948f3656c20c 100644
--- a/drivers/gpu/drm/msm/adreno/a6xx_gpu.c
+++ b/drivers/gpu/drm/msm/adreno/a6xx_gpu.c
@@ -1045,21 +1045,12 @@ static int a6xx_pm_suspend(struct msm_gpu *gpu)
 {
 	struct adreno_gpu *adreno_gpu = to_adreno_gpu(gpu);
 	struct a6xx_gpu *a6xx_gpu = to_a6xx_gpu(adreno_gpu);
-	int i, ret;
 
 	trace_msm_gpu_suspend(0);
 
 	devfreq_suspend_device(gpu->devfreq.devfreq);
 
-	ret = a6xx_gmu_stop(a6xx_gpu);
-	if (ret)
-		return ret;
-
-	if (adreno_gpu->base.hw_apriv || a6xx_gpu->has_whereami)
-		for (i = 0; i < gpu->nr_rings; i++)
-			a6xx_gpu->shadow[i] = 0;
-
-	return 0;
+	return a6xx_gmu_stop(a6xx_gpu);
 }
 
 static int a6xx_get_timestamp(struct msm_gpu *gpu, uint64_t *value)
-- 
2.25.1

