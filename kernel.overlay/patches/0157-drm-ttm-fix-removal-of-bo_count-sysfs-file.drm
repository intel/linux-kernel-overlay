From 6e69457acf094241e16610753531e1a79034116c Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>
Date: Tue, 9 Feb 2021 14:15:53 +0100
Subject: [PATCH 0157/2740] drm/ttm: fix removal of bo_count sysfs file
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Only a zombie leftover from rebasing.

Signed-off-by: Christian KÃ¶nig <christian.koenig@amd.com>
Fixes: 3763d635deaa ("drm/ttm: add debugfs directory v2")
Reported-by: Gerd Hoffmann <kraxel@redhat.com>
Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>
Link: https://patchwork.freedesktop.org/patch/msgid/20210209131756.24650-1-christian.koenig@amd.com
---
 drivers/gpu/drm/ttm/ttm_device.c | 2 --
 include/drm/ttm/ttm_device.h     | 1 -
 2 files changed, 3 deletions(-)

diff --git a/drivers/gpu/drm/ttm/ttm_device.c b/drivers/gpu/drm/ttm/ttm_device.c
index ac0903c9e60a..8bb61dd26437 100644
--- a/drivers/gpu/drm/ttm/ttm_device.c
+++ b/drivers/gpu/drm/ttm/ttm_device.c
@@ -49,8 +49,6 @@ static void ttm_global_release(void)
 	if (--ttm_glob_use_count > 0)
 		goto out;
 
-	kobject_del(&glob->kobj);
-	kobject_put(&glob->kobj);
 	ttm_mem_global_release(&ttm_mem_glob);
 	__free_page(glob->dummy_read_page);
 	memset(glob, 0, sizeof(*glob));
diff --git a/include/drm/ttm/ttm_device.h b/include/drm/ttm/ttm_device.h
index 7bc8bb797161..035bbc044a3b 100644
--- a/include/drm/ttm/ttm_device.h
+++ b/include/drm/ttm/ttm_device.h
@@ -55,7 +55,6 @@ extern struct ttm_global {
 	 * Constant after init.
 	 */
 
-	struct kobject kobj;
 	struct page *dummy_read_page;
 	spinlock_t lru_lock;
 
-- 
2.25.1

