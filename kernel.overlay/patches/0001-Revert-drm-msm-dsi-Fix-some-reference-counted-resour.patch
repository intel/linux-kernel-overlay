From c2f027982e56564563ea7236d758f2d9ca961541 Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Tue, 21 Sep 2021 12:30:19 +0800
Subject: [PATCH 01/30] Revert "drm/msm/dsi: Fix some reference counted
 resource leaks"

This reverts commit dbeb4574ddf07c072e17d773fd33f1e8dd539b1a.
---
 drivers/gpu/drm/msm/dsi/dsi.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/drivers/gpu/drm/msm/dsi/dsi.c b/drivers/gpu/drm/msm/dsi/dsi.c
index 7e364b9c9f9e..627048851d99 100644
--- a/drivers/gpu/drm/msm/dsi/dsi.c
+++ b/drivers/gpu/drm/msm/dsi/dsi.c
@@ -26,10 +26,8 @@ static int dsi_get_phy(struct msm_dsi *msm_dsi)
 	}
 
 	phy_pdev = of_find_device_by_node(phy_node);
-	if (phy_pdev) {
+	if (phy_pdev)
 		msm_dsi->phy = platform_get_drvdata(phy_pdev);
-		msm_dsi->phy_dev = &phy_pdev->dev;
-	}
 
 	of_node_put(phy_node);
 
@@ -38,6 +36,8 @@ static int dsi_get_phy(struct msm_dsi *msm_dsi)
 		return -EPROBE_DEFER;
 	}
 
+	msm_dsi->phy_dev = get_device(&phy_pdev->dev);
+
 	return 0;
 }
 
-- 
2.27.0

